<!DOCTYPE html><html><head><title>sqlite-client: Intro</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Georgi Bozhinov" /><meta name="description" content="A functional wrapper around the JDBC API for sqlite" /><meta name="og:image" content="/sqlite-client/img/poster.png" /><meta name="image" property="og:image" content="/sqlite-client/img/poster.png" /><meta name="og:title" content="sqlite-client: Intro" /><meta name="title" property="og:title" content="sqlite-client: Intro" /><meta name="og:site_name" content="sqlite-client" /><meta name="og:url" content="https://github.com/Nimor111/sqlite-client" /><meta name="og:type" content="website" /><meta name="og:description" content="A functional wrapper around the JDBC API for sqlite" /><link rel="icon" type="image/png" href="/sqlite-client/img/favicon.png" /><meta name="twitter:title" content="sqlite-client: Intro" /><meta name="twitter:image" content="/sqlite-client/img/poster.png" /><meta name="twitter:description" content="A functional wrapper around the JDBC API for sqlite" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/sqlite-client/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/sqlite-client/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/sqlite-client/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/sqlite-client/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/sqlite-client/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/sqlite-client/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/sqlite-client/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/sqlite-client/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/sqlite-client/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/sqlite-client/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/sqlite-client/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/sqlite-client/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/sqlite-client/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/sqlite-client/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/sqlite-client/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/sqlite-client/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/sqlite-client/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/sqlite-client/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/sqlite-client/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/sqlite-client/img/favicon310x150.png" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/sqlite-client/highlight/styles/vs.css" /><link rel="stylesheet" href="/sqlite-client/css/light-style.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><div id="sidebar-brand"><a href="/sqlite-client/" class="brand"><div class="brand-wrapper"></div><span>sqlite-client</span></a><button id="main-toggle" class="sidebar-toggle"><span class="close"></span></button></div><div class="sidebar-nav"><li><a href="/sqlite-client/" class=""></a></li><li><a href="/sqlite-client/docs/" class="active">Intro</a></li><li><a href="/sqlite-client/css/light-style.css" class=""></a></li><li><a href="/sqlite-client/js/search.js" class=""></a></li></div></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li class="search-nav"><div id="search-dropdown"><label><i class="fa fa-search"></i>Search</label><input id="search-bar" type="text" placeholder="Enter keywords here..." onclick="displayToggleSearch(event)" /><ul id="search-dropdown-content" class="dropdown dropdown-content"></ul></div></li><li id="gh-eyes-item" class="hidden-xs to-uppercase"><a href="https://github.com/Nimor111/sqlite-client" target="_blank" rel="noopener noreferrer"><i class="fa fa-eye"></i><span>Watchers<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs to-uppercase"><a href="https://github.com/Nimor111/sqlite-client" target="_blank" rel="noopener noreferrer"><i class="fa fa-star-o"></i><span>Stars<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="Nimor111" data-github-repo="sqlite-client"><div class="content-wrapper"><section><h1 id="guide">Guide</h1>

<ul>
  <li><a href="#guide">Guide</a>
    <ul>
      <li><a href="#installation">Installation</a></li>
      <li><a href="#main-concepts">Main concepts</a></li>
      <li><a href="#usage">Usage</a>
        <ul>
          <li><a href="#create-a-db-connection">Create a DB Connection</a></li>
          <li><a href="#create-a-table">Create a table</a></li>
          <li><a href="#insert-data">Insert data</a></li>
          <li><a href="#query-data">Query data</a>
            <ul>
              <li><a href="#without-params">Without params</a></li>
              <li><a href="#with-params">With params</a></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="installation">Installation</h2>

<p>With sbt:</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"TBA"</span>
</code></pre></div></div>

<p>With ammonite:</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">$ivy.</span><span class="n">`TBA`</span>
</code></pre></div></div>

<p>Imports</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">sqlite._</span>
</code></pre></div></div>

<h2 id="main-concepts">Main concepts</h2>

<p>The library functions aim to be compatible with the JDBC interface.</p>

<p>Tables are represented by case classes, which extend
the <code class="language-plaintext highlighter-rouge">Model</code> trait.</p>

<p>There are several types of supported fields, which extend the <code class="language-plaintext highlighter-rouge">DBField</code> trait.
They are: <code class="language-plaintext highlighter-rouge">IntField</code>, <code class="language-plaintext highlighter-rouge">StringField</code>, <code class="language-plaintext highlighter-rouge">BooleanField</code>, <code class="language-plaintext highlighter-rouge">DoubleField</code>, <code class="language-plaintext highlighter-rouge">OptionalField</code> and <code class="language-plaintext highlighter-rouge">ModelField</code> for foreign
key relations.</p>

<p>The library makes use of runtime reflection right now, with the aim to transition to macros and compile time
reflection in the future.</p>

<p>The SQL is written by the user, and the library executes it in a typesafe way, using abstractions like <code class="language-plaintext highlighter-rouge">Try</code> and
<code class="language-plaintext highlighter-rouge">Either</code> for error handling.</p>

<h2 id="usage">Usage</h2>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">sqlite._</span>
<span class="k">import</span> <span class="nn">sqlite.Types._</span>
</code></pre></div></div>

<h3 id="create-a-db-connection">Create a DB connection</h3>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="nv">d</span> <span class="k">=</span> <span class="nc">Database</span><span class="o">(</span><span class="s">"jdbc:sqlite:database.db"</span><span class="o">)</span>
<span class="c1">// d: Database = Database(url = "jdbc:sqlite:database.db")</span>

<span class="c1">// SQLEither is a type alias for Either[List[SQLException], DBConnection]</span>
<span class="k">val</span> <span class="nv">conn</span> <span class="k">=</span> <span class="nv">d</span><span class="o">.</span><span class="py">getConnection</span><span class="o">()</span>
<span class="c1">// conn: SQLEither[DBConnection] = Right(</span>
<span class="c1">//   value = DBConnection(conn = org.sqlite.jdbc4.JDBC4Connection@2d160bd6)</span>
<span class="c1">// )</span>
</code></pre></div></div>

<h3 id="create-a-table">Create a table</h3>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="o">{</span>
  <span class="n">conn</span> <span class="k">&lt;-</span> <span class="nv">d</span><span class="o">.</span><span class="py">getConnection</span><span class="o">()</span>
  <span class="n">dropTableSql</span> <span class="k">=</span> <span class="s">"""
    DROP TABLE IF EXISTS warehouses;
  """</span>
  <span class="n">createTableSql</span> <span class="k">=</span> <span class="s">"""
    CREATE TABLE IF NOT EXISTS warehouses (
      id integer PRIMARY KEY,
      name text NOT NULL,
      capacity real NOT NULL,
      numItems integer);
  """</span>

  <span class="k">_</span> <span class="k">&lt;-</span> <span class="nv">conn</span><span class="o">.</span><span class="py">executeUpdate</span><span class="o">(</span><span class="n">dropTableSql</span><span class="o">)</span>
  <span class="k">_</span> <span class="k">&lt;-</span> <span class="nv">conn</span><span class="o">.</span><span class="py">executeUpdate</span><span class="o">(</span><span class="n">createTableSql</span><span class="o">)</span>
  <span class="k">_</span> <span class="k">&lt;-</span> <span class="nv">conn</span><span class="o">.</span><span class="py">close</span><span class="o">()</span>
<span class="o">}</span> <span class="nf">yield</span> <span class="o">()</span>
<span class="c1">// res0: Either[List[java.sql.SQLException], Unit] = Right(value = ())</span>
</code></pre></div></div>

<h3 id="insert-data">Insert data</h3>

<p><strong>Note</strong>: Inner classes for tables are not currently supported. The table classes should not be nested in other classes.
This is due to limitations in Scala reflection. This should be addressed with the switch to compile time reflection.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">case</span> <span class="k">class</span> <span class="nc">Name</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">StringField</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">Model</span>

<span class="k">object</span> <span class="nc">Name</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">apply</span><span class="o">(</span><span class="n">name</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Name</span> <span class="o">=</span>
    <span class="k">new</span> <span class="nc">Name</span><span class="o">(</span><span class="nc">StringField</span><span class="o">(</span><span class="n">name</span><span class="o">))</span>
<span class="o">}</span>

<span class="k">case</span> <span class="k">class</span> <span class="nc">Warehouse</span><span class="o">(</span>
    <span class="n">id</span><span class="k">:</span> <span class="kt">IntField</span><span class="o">,</span>
    <span class="n">name</span><span class="k">:</span> <span class="kt">ModelField</span><span class="o">[</span><span class="kt">Name</span><span class="o">],</span>
    <span class="n">capacity</span><span class="k">:</span> <span class="kt">DoubleField</span><span class="o">,</span>
    <span class="n">numItems</span><span class="k">:</span> <span class="kt">OptionalField</span><span class="o">[</span><span class="kt">IntField</span><span class="o">]</span>
<span class="o">)</span> <span class="k">extends</span> <span class="nc">Model</span>

<span class="c1">// Easier creation</span>
<span class="k">object</span> <span class="nc">Warehouse</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">apply</span><span class="o">(</span>
      <span class="n">id</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span>
      <span class="n">name</span><span class="k">:</span> <span class="kt">Name</span><span class="o">,</span>
      <span class="n">capacity</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span>
      <span class="n">numItems</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span>
  <span class="o">)</span><span class="k">:</span> <span class="kt">Warehouse</span> <span class="o">=</span>
    <span class="k">new</span> <span class="nc">Warehouse</span><span class="o">(</span>
      <span class="nc">IntField</span><span class="o">(</span><span class="n">id</span><span class="o">),</span>
      <span class="nc">ModelField</span><span class="o">(</span><span class="n">name</span><span class="o">),</span>
      <span class="nc">DoubleField</span><span class="o">(</span><span class="n">capacity</span><span class="o">),</span>
      <span class="nc">OptionalField</span><span class="o">(</span><span class="nv">numItems</span><span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="nc">IntField</span><span class="o">))</span>
    <span class="o">)</span>
<span class="o">}</span>

<span class="k">val</span> <span class="nv">w</span> <span class="k">=</span> <span class="nc">Warehouse</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="nc">Name</span><span class="o">(</span><span class="s">"First"</span><span class="o">),</span> <span class="mf">1.0</span><span class="o">,</span> <span class="nc">Some</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span>
<span class="c1">// w: Warehouse = Warehouse(</span>
<span class="c1">//   id = IntField(value = 1),</span>
<span class="c1">//   name = ModelField(value = Name(name = StringField(value = "First"))),</span>
<span class="c1">//   capacity = DoubleField(value = 1.0),</span>
<span class="c1">//   numItems = OptionalField(value = Some(value = IntField(value = 1)))</span>
<span class="c1">// )</span>

<span class="k">for</span> <span class="o">{</span>
  <span class="n">conn</span> <span class="k">&lt;-</span> <span class="nv">d</span><span class="o">.</span><span class="py">getConnection</span><span class="o">()</span>

  <span class="n">insertWarehouseSQL</span> <span class="k">=</span> <span class="s">"""
  INSERT INTO warehouses(id, name, capacity, numItems) VALUES (?, ?, ?, ?)
  """</span>

  <span class="k">_</span> <span class="k">&lt;-</span> <span class="nv">conn</span><span class="o">.</span><span class="py">executeUpdate</span><span class="o">(</span><span class="n">insertWarehouseSQL</span><span class="o">,</span> <span class="n">w</span><span class="o">)</span>
  <span class="k">_</span> <span class="k">&lt;-</span> <span class="nv">conn</span><span class="o">.</span><span class="py">close</span><span class="o">()</span>
<span class="o">}</span> <span class="nf">yield</span> <span class="o">()</span>
<span class="c1">// res1: Either[List[java.sql.SQLException], Unit] = Right(value = ())</span>
</code></pre></div></div>

<h2 id="query-data">Query data</h2>

<h3 id="without-params">Without params</h3>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="o">{</span>
  <span class="n">conn</span> <span class="k">&lt;-</span> <span class="nv">d</span><span class="o">.</span><span class="py">getConnection</span><span class="o">()</span>

  <span class="n">querySQL</span> <span class="k">=</span> <span class="s">"""
    SELECT * FROM warehouses;
  """</span>

  <span class="n">w</span> <span class="k">&lt;-</span> <span class="nv">conn</span><span class="o">.</span><span class="py">executeQuery</span><span class="o">[</span><span class="kt">Warehouse</span><span class="o">](</span><span class="n">querySQL</span><span class="o">)</span>
  <span class="k">_</span> <span class="k">&lt;-</span> <span class="nv">conn</span><span class="o">.</span><span class="py">close</span><span class="o">()</span>
<span class="o">}</span> <span class="k">yield</span> <span class="n">w</span>
</code></pre></div></div>

<h3 id="with-params">With params</h3>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="o">{</span>
  <span class="n">conn</span> <span class="k">&lt;-</span> <span class="nv">d</span><span class="o">.</span><span class="py">getConnection</span><span class="o">()</span>

  <span class="n">querySQL</span> <span class="k">=</span> <span class="s">"""
    SELECT * FROM warehouses WHERE id=?;
  """</span>

  <span class="n">w</span> <span class="k">&lt;-</span> <span class="nv">conn</span><span class="o">.</span><span class="py">executeQuery</span><span class="o">[</span><span class="kt">Warehouse</span><span class="o">](</span><span class="n">querySQL</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
  <span class="k">_</span> <span class="k">&lt;-</span> <span class="nv">conn</span><span class="o">.</span><span class="py">close</span><span class="o">()</span>
<span class="o">}</span> <span class="k">yield</span> <span class="n">w</span>
</code></pre></div></div>
</section></div></div></div></div><script src="/sqlite-client/highlight/highlight.pack.js"></script><script src="/sqlite-client/lunr/lunr.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash']});
hljs.initHighlightingOnLoad();
      </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script>((window.gitter = {}).chat = {}).options = {
room: 'Nimor111/sqlite-client'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/sqlite-client/js/search.js"></script><script src="/sqlite-client/js/docs.js"></script></body></html>